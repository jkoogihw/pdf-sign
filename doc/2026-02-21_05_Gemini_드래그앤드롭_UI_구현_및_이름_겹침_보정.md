# 2026-02-21_05_Gemini_드래그앤드롭_UI_구현_및_이름_겹침_보정.md

## 1. 개요
- 사용자 편의를 위한 드래그 앤 드롭 파일 업로드 기능을 도입하고, 일반/자동차 보험 양식에서 이름과 서명이 겹치는 현상을 정밀 보정함.

## 2. 주요 개선 사항

### 2.1. 드래그 앤 드롭(Drag & Drop) 업로드 UI
- **레이아웃 개편**: 업로드 섹션을 2열로 구성하여 좌측에는 기존 입력 필드, 우측에는 드롭 존(Drop Zone) 배치.
- **실시간 피드백**:
    - **PDF**: 파일 드롭 시 우측 영역에 파일명을 즉시 표시.
    - **서명**: 드롭 시 이미지 썸네일을 프리뷰로 제공하여 업로드 상태 확인 가능.
- **교체 로직**: 파일을 다시 드래그하여 놓으면 기존 파일이 자동으로 새 파일로 교체되도록 구현.

### 2.2. 이름 겹침 방지 정밀 보정 (Overlap Prevention)
- **문제 원인**: OCR 인식 시 이름(조정국 등)과 `(서명/인)` 문구가 하나의 텍스트 아이템으로 묶여 있어 기준점(Anchor)이 이름 쪽으로 치우침.
- **해결 방안**:
    - 텍스트 컨텐츠 내에서 `(` 문자가 시작되는 상대적 위치를 인덱스로 산출.
    - 전체 텍스트 아이템 너비 내에서 해당 비율만큼 X 좌표를 우측으로 이동.
    - 이 로직을 통해 서명이 이름 위를 覆盖하지 않고 정확히 서명란 안에 위치하게 됨.

### 2.3. 기본 설정 최적화
- **서명 너비**: 기본값을 `120pt`로 상향하여 별도 조정 없이도 적절한 크기로 배치되도록 설정.
- **파일명 명명 규칙**: 출력 파일명을 `원본파일명_추가서명.pdf`로 동적 생성하여 파일 관리 편의성 증대.

## 3. 관련 파일
- `app.js`: 드롭 이벤트 처리 및 정밀 좌표 산출 로직 구현.
- `index.html`: 드롭 존 엘리먼트 및 2열 레이아웃 구조 추가.
- `styles.css`: 드롭 존 디자인, 호버 효과, 프리뷰 스타일 반영.

## 4. 최종 결과
- 업로드 UI가 현대적으로 개선되었으며, 모든 보험 양식에서 이름과의 간섭 없이 정확한 서명 배치가 가능해짐.
